/* /assets/css/ui-scale.css
   Freeze + escala proporcional (sin zoom)
   - Se activa con: html.ui-scale-on
   - Transición suave SOLO en toggles con: html.ui-scale-anim
   - Variables seteadas por JS:
     --uiBaseW (number)
     --uiScale (0..1)
     --uiScaleInv (>=1)
     --uiVh (px con unidad)
*/

:root {
  --uiBaseW: 1730;     /* number */
  --uiScale: 1;        /* number */
  --uiScaleInv: 1;     /* number */
  --uiVh: 100vh;       /* unit (fallback) */
}

/* ON sólo desktop. El JS pone/saca esta clase */
html.ui-scale-on {
  overflow-x: hidden;
}

/* Root escalable (tu viewport desktop) */
html.ui-scale-on #scroll-container {
  /* Freeze a baseW */
  width: calc(var(--uiBaseW) * 1px);
  margin-left: auto;
  margin-right: auto;

  /* Escala proporcional */
  transform-origin: top center;
  transform: scale(var(--uiScale));
  will-change: transform;

  /* Evitar scroll horizontal residual */
  overflow-x: hidden;
}

/* Scroll/altura sin clipping:
   compenso el alto del scroller para que el alto VISUAL quede igual al viewport. */
html.ui-scale-on body.tt-smooth-scroll:not(.is-mobile) #scroll-container {
  height: calc(var(--uiVh) * var(--uiScaleInv));
}

html.ui-scale-on body {
  overflow-x: hidden;
}

/* Transición suave SOLO durante el toggle ON/OFF (evita jank en resize continuo) */
@media (prefers-reduced-motion: no-preference) {
  html.ui-scale-anim #scroll-container {
    transition: transform 140ms cubic-bezier(0.2, 0.8, 0.2, 1);
  }
}

/* Patrón opcional:
   Para “neutralizar” la escala en un nodo dentro de #scroll-container,
   envolvelo en un wrapper y poné data-ui-no-scale en el wrapper.
*/
html.ui-scale-on #scroll-container [data-ui-no-scale] {
  transform: scale(var(--uiScaleInv));
  transform-origin: top left;
}
